schema: '2.0'
stages:
  pretrain:
    cmd: clj src/pretrain.clj data/iris.csv data/label-lookup.json data/train.arrow
      data/test.arrow
    deps:
    - path: data/iris.csv
      md5: 57fce90c81521889c736445f058c4838
      size: 3716
    - path: src/pretrain.clj
      md5: 63b0691f64a93fc0be1dc379da6f63da
      size: 1569
    outs:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/test.arrow
      md5: d96bb877b208e8047d54e2c15640b677
      size: 3842
    - path: data/train.arrow
      md5: 4908b7ec0bf7b2869c5838d1c2382517
      size: 6282
  train:
    cmd: python3 src/train.py data/train.arrow src/params.py data/model.pkl
    deps:
    - path: data/train.arrow
      md5: 17676ca837440cc056f9685d29433b2d
      size: 6282
    - path: src/train.py
      md5: ff30a6c6497b17afa45d2197bdfb98d8
      size: 1251
    params:
      src/params.py:
        random_forest:
          class_weight: balanced_subsample
          verbose: 1
          n_jobs: -1
    outs:
    - path: data/model.pkl
      md5: e391be1568aa9aadc39700953148da27
      size: 154716
  predict:
    cmd: clj -M:std:jni src/predict.clj data/model.pkl data/label-lookup.json  data/predictions.csv
    deps:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/model.pkl
      md5: e391be1568aa9aadc39700953148da27
      size: 154716
    - path: src/predict.clj
      md5: 03b4f566fe47c1d4f1ea4bdb03d2bcd7
      size: 3982
    outs:
    - path: data/predictions.csv
      md5: 39f91c33946b755f852a1f08626a02de
      size: 272
  evaluate:
    cmd: python3 src/evaluate.py data/model.pkl data/label-lookup.json data/test.arrow
      metrics.json dvclive feat-importance.png confusion_matrix
    deps:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/model.pkl
      md5: e391be1568aa9aadc39700953148da27
      size: 154716
    - path: data/test.arrow
      md5: 08b14919e7b6df6a1ba232c988783afa
      size: 3842
    - path: src/evaluate.py
      md5: d0b9c1267e826fb0acf6ddffa2ba2c91
      size: 3180
    outs:
    - path: dvclive/plots/images/feat-importance.png
      md5: 8163980345d960e08cf07b5f19ff50e9
      size: 15286
    - path: dvclive/plots/sklearn/confusion_matrix.json
      md5: a6f7d33046bb0dd9ee6b282912275893
      size: 3431
    - path: metrics.json
      md5: f1d3070c49ee71190c25a0fbd1d68f2e
      size: 93
  prepare:
    cmd: clj src/prepare.clj data/iris.csv data/label-lookup.json data/train.arrow
      data/test.arrow
    deps:
    - path: data/iris.csv
      md5: 57fce90c81521889c736445f058c4838
      size: 3716
    - path: src/prepare.clj
      md5: 3a265a6afbde6c42d28fa1ede74ede78
      size: 1568
    outs:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/test.arrow
      md5: 245525ab16c6318a4b4a8239d7a77689
      size: 3842
    - path: data/train.arrow
      md5: fc7d036333264424036a605646fdf34c
      size: 6282
  prep:
    cmd: clj -M:std src/prep.clj data/iris.csv data/label-lookup.json data/train.arrow
      data/test.arrow
    deps:
    - path: data/iris.csv
      md5: 57fce90c81521889c736445f058c4838
      size: 3716
    - path: src/prep.clj
      md5: 9b4e3a0e2fada323a7c3b8a332789f9d
      size: 1863
    outs:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/test.arrow
      md5: 08b14919e7b6df6a1ba232c988783afa
      size: 3842
    - path: data/train.arrow
      md5: 17676ca837440cc056f9685d29433b2d
      size: 6282
