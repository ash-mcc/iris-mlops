schema: '2.0'
stages:
  pretrain:
    cmd: clj src/pretrain.clj data/iris.csv data/label-lookup.json data/train.arrow
      data/test.arrow
    deps:
    - path: data/iris.csv
      md5: 57fce90c81521889c736445f058c4838
      size: 3716
    - path: src/pretrain.clj
      md5: 63b0691f64a93fc0be1dc379da6f63da
      size: 1569
    outs:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/test.arrow
      md5: d96bb877b208e8047d54e2c15640b677
      size: 3842
    - path: data/train.arrow
      md5: 4908b7ec0bf7b2869c5838d1c2382517
      size: 6282
  train:
    cmd: python3 src/train.py data/train.arrow model.pkl
    deps:
    - path: data/train.arrow
      md5: fc7d036333264424036a605646fdf34c
      size: 6282
    - path: src/train.py
      md5: c53ea221ed93dc4b2c014ad5872f303b
      size: 1016
    params:
      params.yaml:
        train.class_weight: balanced_subsample
    outs:
    - path: model.pkl
      md5: 0627b3214a7fd56bab23cd9bdc35c161
      size: 153098
  predict:
    cmd: clj -A:py src/predict.clj model.pkl data/label-lookup.json data/predictions.csv
    deps:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: model.pkl
      md5: 0627b3214a7fd56bab23cd9bdc35c161
      size: 153098
    - path: src/predict.clj
      md5: 8d59002193156b88814ee1d99ea8679b
      size: 3222
    outs:
    - path: data/predictions.csv
      md5: fbe7fe5c728789e27a7fc0eaeb49f968
      size: 272
  evaluate:
    cmd: python3 src/evaluate.py model.pkl data/label-lookup.json data/test.arrow
      metrics.json evaluation importance.png
    deps:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/test.arrow
      md5: 245525ab16c6318a4b4a8239d7a77689
      size: 3842
    - path: model.pkl
      md5: 0627b3214a7fd56bab23cd9bdc35c161
      size: 153098
    - path: src/evaluate.py
      md5: 7c606dd894cbf8d988be339b17806aab
      size: 3186
    outs:
    - path: evaluation/importance.png
      md5: 209232af663baa86bd4fd99cebef69b7
      size: 14492
    - path: evaluation/plots/sklearn/confusion_matrix.json
      md5: 2b407fc4c9f3aac7cc1b6a02889c725b
      size: 3423
    - path: metrics.json
      md5: 5f9c8eb9385474e1de5be1858aa521cc
      size: 93
  prepare:
    cmd: clj src/prepare.clj data/iris.csv data/label-lookup.json data/train.arrow
      data/test.arrow
    deps:
    - path: data/iris.csv
      md5: 57fce90c81521889c736445f058c4838
      size: 3716
    - path: src/prepare.clj
      md5: 3a265a6afbde6c42d28fa1ede74ede78
      size: 1568
    outs:
    - path: data/label-lookup.json
      md5: ab647998da67883af4434bc8af71a275
      size: 47
    - path: data/test.arrow
      md5: 245525ab16c6318a4b4a8239d7a77689
      size: 3842
    - path: data/train.arrow
      md5: fc7d036333264424036a605646fdf34c
      size: 6282
