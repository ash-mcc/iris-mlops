schema: '2.0'
stages:
  pretrain:
    cmd: clj src/pretrain.clj data/iris.csv data/lookup-table.edn data/train.arrow
      data/test.arrow
    deps:
    - path: data/iris.csv
      md5: 57fce90c81521889c736445f058c4838
      size: 3716
    - path: src/pretrain.clj
      md5: 2c132bfd81d82ce48934a4edf9ee0903
      size: 1476
    outs:
    - path: data/lookup-table.edn
      md5: 60c1847f0826e6217609ce87fad1d326
      size: 43
    - path: data/test.arrow
      md5: 5a002e541b62d4d36c03c9b72ed615d3
      size: 3842
    - path: data/train.arrow
      md5: 8f01a8b967192cc7ed15ac33d8a9e449
      size: 6282
  train:
    cmd: python3 src/train.py data/train.arrow model.pkl
    deps:
    - path: data/train.arrow
      md5: 8f01a8b967192cc7ed15ac33d8a9e449
      size: 6282
    - path: src/train.py
      md5: c53ea221ed93dc4b2c014ad5872f303b
      size: 1016
    params:
      params.yaml:
        train.class_weight: balanced_subsample
    outs:
    - path: model.pkl
      md5: 7a013f5aad71d6323dcdc59f06accd9a
      size: 151327
  predict:
    cmd: clj -A:py src/predict.clj model.pkl data/lookup-table.edn data/predictions.csv
    deps:
    - path: data/lookup-table.edn
      md5: 60c1847f0826e6217609ce87fad1d326
      size: 43
    - path: model.pkl
      md5: 7a013f5aad71d6323dcdc59f06accd9a
      size: 151327
    - path: src/predict.clj
      md5: 2c455dae5038b573a8d36285381c8f32
      size: 3242
    outs:
    - path: data/predictions.csv
      md5: d6bcf197417a0e120dfc1676cc3e503e
      size: 270
  evaluate:
    cmd: python3 src/evaluate.py model.pkl data/test.arrow metrics.json evaluation
      importance.png
    deps:
    - path: data/test.arrow
      md5: 5a002e541b62d4d36c03c9b72ed615d3
      size: 3842
    - path: model.pkl
      md5: 7a013f5aad71d6323dcdc59f06accd9a
      size: 151327
    - path: src/evaluate.py
      md5: 461da1867107614d7fde902c876ed818
      size: 2546
    outs:
    - path: evaluation/importance.png
      md5: 5a838138e6192ed14fc5f1538b964f6a
      size: 15007
    - path: evaluation/plots/confusion_matrix.json
      md5: 5ad6662f7b7434e6a2cf3040e22bbf1d
      size: 2837
    - path: metrics.json
      md5: 9d6314582c66b6c8d46be143f3a732b4
      size: 93
